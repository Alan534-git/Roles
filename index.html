<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CiberSeguridad: El Quiz</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <!-- Carga los estilos de menÃº/base -->
  <link rel="stylesheet" href="css/index.css" />
</head>
<body>
  <div class="container" id="main-container">

    <div id="main-menu" class="setup-section">
      <h1>CiberSeguridad: El Quiz</h1>
      <p class="subtitle">Pon a prueba tus conocimientos en seguridad informÃ¡tica.</p>

      <!-- BotÃ³n Ãšnico de Inicio -->
      <button id="startButton">INICIAR PARTIDA</button>
    </div>

    <!-- SecciÃ³n de ConfiguraciÃ³n de la Partida (Inicialmente oculta) -->
    <div id="config-setup" class="hidden setup-section">
      <h2>âš™ï¸ Configurar Partida</h2>

      <!-- 1. SelecciÃ³n de Modo de Juego -->
      <div class="mode-section">
        <h3>Modo de Juego</h3>
        <button data-mode="single_quiz" class="mode-select-btn selected" id="singleQuizBtn">ğŸ‘¤ 1 Jugador (Quiz Normal)</button>
        <button data-mode="campaign" class="mode-select-btn" id="campaignBtn">âš”ï¸ CampaÃ±a (Rol)</button>
        <button data-mode="multi_quiz" class="mode-select-btn" id="multiplayerBtn">ğŸ‘¥ 2 Jugadores (Pantalla Dividida)</button>
      </div>

      <!-- 2. Opciones Adicionales / Modificadores (Se muestran/ocultan segÃºn el Modo) -->
      <div id="modifiers-section">
        <!-- Modificador Contrarreloj (Aplicable a todos los modos de Quiz) -->
        <label for="isTimed" class="checkbox-label">
          <input type="checkbox" id="isTimed">
          Modo Contrarreloj (30s por pregunta)
        </label>
        
        <!-- SelecciÃ³n de Rol para CampaÃ±a (Solo si campaign estÃ¡ seleccionado) -->
        <div id="campaign-role-select" class="hidden">
           <label for="role-select">Seleccionar Rol para CampaÃ±a:</label>
           <button data-role="hacker" class="role-select-btn">ğŸ’» Hacker</button>
           <button data-role="defensor" class="role-select-btn">ğŸ›¡ï¸ Defensor</button>
        </div>
      </div>
      
      <p id="error-message" class="error-message"></p>
      
      <!-- BotÃ³n para Iniciar con la ConfiguraciÃ³n Seleccionada -->
      <button id="confirmStartButton" class="cta-button">Confirmar e Iniciar &raquo;</button>
    </div>

  </div>

  <!-- Control de Volumen en Esquina Inferior Derecha -->
  <div id="volume-control-container">
    <button id="volume-toggle-btn" class="volume-icon-btn" aria-label="Mute/Unmute">
      <svg id="volume-icon-unmuted" viewBox="0 0 24 24" width="24" height="24">
        <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.31-2.5-4.06v8.12c1.48-.75 2.5-2.29 2.5-4.06zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" fill="currentColor"/>
      </svg>
      <svg id="volume-icon-muted" viewBox="0 0 24 24" width="24" height="24" style="display:none;">
        <path d="M16.6915026,12.4744748 L21.5427616,17.3255701 C22.1591129,17.9419214 22.1591129,18.9487233 21.5427616,19.5650746 C20.9264103,20.1814259 19.9196084,20.1814259 19.3032571,19.5650746 L14.4519981,14.7139793 L9.64591706,19.5650746 C9.02956575,20.1814259 8.02276384,20.1814259 7.40641252,19.5650746 C6.78990135,18.9487233 6.78990135,17.9419214 7.40641252,17.3255701 L12.2576715,12.4744748 L7.40641252,7.62337954 C6.78990135,7.00686836 6.78990135,6.00006645 7.40641252,5.38355528 C8.02276384,4.76704410 9.02956575,4.76704410 9.64591706,5.38355528 L14.4519981,10.2346506 L19.3032571,5.38355528 C19.9196084,4.76704410 20.9264103,4.76704410 21.5427616,5.38355528 C22.1591129,6.00006645 22.1591129,7.00686836 21.5427616,7.62337954 L16.6915026,12.4744748 Z M3,9 L3,15 L7,15 L12,20 L12,4 L7,9 L3,9 Z" fill="currentColor"/>
      </svg>
    </button>
    <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.5" class="volume-slider-vertical">
    <audio id="backgroundMusic" loop preload="auto" playsinline src="mp3/musica_inicio.mp3"></audio>
  </div>
  <!-- Aviso si el navegador bloquea el autoplay: se muestra sÃ³lo cuando sea necesario -->
  <div id="sound-unblock" style="display:none; position:fixed; bottom:100px; right:20px; background:#1c1c2b; color:#e0e0e0; padding:10px 12px; border-radius:8px; border:1px solid #00ffaa55; z-index:9999;">
    <div style="font-size:0.95em; margin-bottom:8px;">El navegador bloqueÃ³ el sonido automÃ¡tico. Pulsa para activar audio:</div>
    <button id="enable-sound-btn" style="background:#00ffaa; color:#1c1c2b; border:none; padding:8px 10px; border-radius:6px; cursor:pointer; font-weight:bold;">Activar sonido</button>
    <div style="font-size:0.8em; margin-top:6px; color:#a0a0a0;">O permita autoplay para este sitio en la configuraciÃ³n del navegador.</div>
  </div>
  
  <script src="js/audio.js"></script>
  <script src="js/index.js"></script>
</body>
</html>