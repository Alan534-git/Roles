<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CiberSeguridad: En Partida</title>
  <!-- Fuente est치ndar de Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  
  <!-- Estilos Base/Globales (fondo, tipograf칤a, contenedor principal) -->
  <link rel="stylesheet" href="css/index.css" /> 
  <!-- Estilos de Juego Espec칤ficos (campa침a, pantalla dividida, timer) -->
  <link rel="stylesheet" href="css/game.css" /> 
</head>
<body>
  <div id="site-header-placeholder"></div>

  <main class="page-main">
  <div class="container" id="game-container" role="main">
    
    <!-- Secci칩n de Juego de Campa침a / Quiz de 1 Jugador -->
    <div id="campaign-game" class="game-mode-section"> <!-- Quitamos 'hidden' inicial, lo controla JS -->
      
      <!-- T칤tulo de Campa침a o Quiz de 1 Jugador -->
      <h2 id="campaign-title">Modo de Juego</h2>
      
      <!-- Temporizador para QUIZ DE 1 JUGADOR CONTRARRELOJ (oculto por defecto) -->
      <div id="single-timer-display" class="timer-display hidden">Tiempo: 30s</div>

  <p id="progress-display" class="progress-display" aria-live="polite"></p>
  <div id="score-display" class="score-display" aria-live="polite">Puntuaci칩n: 0</div>
      
      <!-- Texto del Escenario (Campa침a) o Pregunta (Quiz) -->
      <p id="scenario-text" class="scenario-text">Aqu칤 aparecer치 el texto del escenario o la pregunta.</p>
      <p id="question-text" class="question-text"></p>
      
      <!-- Opciones de Respuesta -->
      <div id="choices" class="choices">
        <!-- Botones de opci칩n se inyectan aqu칤 -->
      </div>
      
      <!-- Resultado/Feedback -->
      <p id="outcome-text" class="outcome-text" aria-live="assertive"></p>
    </div>


    <!-- Timer para modo multijugador contrarreloj (Global para el duelo) -->
    <div id="multi-timer-display" class="timer-display hidden">Tiempo: 60s</div>
    
    <!-- Secci칩n de Juego Multijugador (Pantalla Dividida) -->
    <div id="multiplayer-game" class="hidden game-mode-section multiplayer-section">

      <div class="player-screen" id="player1-screen">
        <h2>Jugador 1</h2>
        <div class="instructions">
          Navegar: **W** (Arriba), **S** (Abajo). Seleccionar: **ESPACIO** (Solo si es Quiz).
        </div>
        <div id="p1-score" class="score-multi">Puntuaci칩n: 0</div>
        <p id="p1-question" class="question-multi"></p>
        <div id="p1-choices" class="choices-multi"></div>
        <p id="p1-outcome" class="outcome-multi"></p>
      </div>
      
      <div class="player-screen" id="player2-screen">
        <h2>Jugador 2</h2>
         <div class="instructions">
          Navegar: **FLECHAS** (Arriba, Abajo). Seleccionar: **ENTER** (Solo si es Quiz).
        </div>
        <div id="p2-score" class="score-multi">Puntuaci칩n: 0</div>
        <p id="p2-question" class="question-multi"></p>
        <div id="p2-choices" class="choices-multi"></div>
        <p id="p2-outcome" class="outcome-multi"></p>
      </div>
    </div>
    
  </div>
  
  <!-- Control de Volumen en Esquina Inferior Derecha (Duplicado aqu칤 para tener control en la p치gina de juego) -->
  <!-- Esto es necesario porque game.js ahora tiene un setupGameMusic() que usa este ID. -->
  <div id="volume-control-container">
    <button id="volume-toggle-btn" class="volume-icon-btn" aria-label="Silenciar/Activar sonido" aria-pressed="false" type="button">
      <svg id="volume-icon-unmuted" viewBox="0 0 24 24" width="24" height="24">
        <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.31-2.5-4.06v8.12c1.48-.75 2.5-2.29 2.5-4.06zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" fill="currentColor"/>
      </svg>
      <svg id="volume-icon-muted" viewBox="0 0 24 24" width="24" height="24" style="display:none;">
        <path d="M16.6915026,12.4744748 L21.5427616,17.3255701 C22.1591129,17.9419214 22.1591129,18.9487233 21.5427616,19.5650746 C20.9264103,20.1814259 19.9196084,20.1814259 19.3032571,19.5650746 L14.4519981,14.7139793 L9.64591706,19.5650746 C9.02956575,20.1814259 8.02276384,20.1814259 7.40641252,19.5650746 C6.78990135,18.9487233 6.78990135,17.9419214 7.40641252,17.3255701 L12.2576715,12.4744748 L7.40641252,7.62337954 C6.78990135,7.00686836 6.78990135,6.00006645 7.40641252,5.38355528 C8.02276384,4.76704410 9.02956575,4.76704410 9.64591706,5.38355528 L14.4519981,10.2346506 L19.3032571,5.38355528 C19.9196084,4.76704410 20.9264103,4.76704410 21.5427616,5.38355528 C22.1591129,6.00006645 22.1591129,7.00686836 21.5427616,7.62337954 L16.6915026,12.4744748 Z M3,9 L3,15 L7,15 L12,20 L12,4 L7,9 L3,9 Z" fill="currentColor"/>
      </svg>
    </button>
    <input type="range" id="volumeSliderGame" min="0" max="1" step="0.01" value="0.5" class="volume-slider-vertical" aria-label="Control de volumen">
  </div>

  <!-- Barra de controles del juego: pausar m칰sica y detener partida se muestra ahora en el header -->

  <!-- Aviso para desbloquear audio si el navegador impide el autoplay -->
  <div id="sound-unblock-game" style="display:none; position:fixed; bottom:20px; right:20px; background:linear-gradient(135deg, #1c1c2b 0%, #2a2a3a 100%); color:#e0e0e0; padding:16px 20px; border-radius:10px; border:2px solid #00ffaa; z-index:9998; max-width:340px; box-shadow: 0 0 20px rgba(0, 255, 170, 0.3);">
    <div style="font-size:1em; font-weight:700; margin-bottom:10px; color:#00ffaa;">游댉 Activa el sonido</div>
    <div style="font-size:0.9em; margin-bottom:12px;">El navegador bloque칩 la m칰sica autom치tica. Pulsa el bot칩n para activar:</div>
    <button id="enable-sound-btn-game" style="background:#00ffaa; color:#1c1c2b; border:none; padding:10px 14px; border-radius:6px; cursor:pointer; font-weight:bold; width:100%; font-size:0.95em;">Activar m칰sica</button>
    <div style="font-size:0.8em; margin-top:10px; color:#a0a0a0;">O configura el navegador para permitir autoplay.</div>
  </div>
  
  <!-- Fin del main (contenido del juego) -->
  </main>
  <!-- Footer placeholder (se inyecta como fragmento) -->
  <div id="site-footer-placeholder"></div>
  <!-- Inclusi칩n del script de partials y juego -->
  <script src="js/partials.js"></script>
  <script src="js/audio.js"></script>
  <script src="js/game.js"></script>
</body>
</html>